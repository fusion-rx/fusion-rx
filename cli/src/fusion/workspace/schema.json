{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "SchematicsFusionProjectConfig",
    "title": "Fusion Project Config Schema",
    "type": "object",
    "additionalProperties": false,
    "description": "Defines a fsnconfig.json file.",
    "required": ["name", "version"],
    "properties": {
        "$schema": {
            "type": "string"
        },
        "name": {
            "description": "The name of the Fusion workspace.",
            "type": "string"
        },
        "version": {
            "description": "The version of this workspace",
            "type": "string"
        },
        "newProjectsRoot": {
            "description": "The directory in which new Fusion projects will be generated relative to this file.",
            "type": "string"
        },
        "projects": {
            "description": "Defines projects managed in this workspace by Fusion.",
            "type": "object",
            "patternProperties": {
                "^(?:@[a-zA-Z0-9._-]+/)?[a-zA-Z0-9._-]+$": {
                    "$ref": "#/definitions/project"
                }
            }
        },
        "workspaces": {
            "description": "Defines workspaces that will be managed by Fusion.",
            "type": "object",
            "patternProperties": {
                "^(?:@[a-zA-Z0-9._-]+/)?[a-zA-Z0-9._-]+$": {
                    "$ref": "#/definitions/workspace"
                }
            }
        }
    },
    "definitions": {
        "workspace": {
            "type": "object",
            "description": "Defines a workspace",
            "required": ["projects"],
            "properties": {
                "root": {
                    "description": "Root of the project files.",
                    "type": "string"
                },
                "sourceRoot": {
                    "description": "The root of the source files and assets.",
                    "type": "string"
                },
                "outDir": {
                    "description": "The output directory of the project builds relative to `root`. If undefined, will not create the output directory prior to building.",
                    "type": "string"
                },
                "projects": {
                    "description": "Defines workspaces that will be managed by Fusion.",
                    "type": "object",
                    "patternProperties": {
                        "^(?:@[a-zA-Z0-9._-]+/)?[a-zA-Z0-9._-]+$": {
                            "$ref": "#/definitions/project"
                        }
                    }
                },
                "preInstall": {
                    "description": "If `npm install` should be run prior to building the workspace projects.",
                    "type": "boolean"
                }
            }
        },
        "project": {
            "type": "object",
            "description": "Defines properties for a project in this workspace",
            "required": ["projectType", "root"],
            "properties": {
                "projectType": {
                    "description": "Specify if the project is an application or library",
                    "type": "string",
                    "enum": ["application", "library"]
                },
                "root": {
                    "description": "The source of the project, relative to the workspace srcRoot.",
                    "type": "string"
                },
                "sourceRoot": {
                    "description": "The root of the source files and assets.",
                    "type": "string"
                },
                "preInstall": {
                    "description": "Whether `npm install` should be run prior to buildiing.",
                    "type": "boolean"
                },
                "architect": {
                    "type": "object",
                    "properties": {
                        "build": {
                            "$ref": "#/definitions/build"
                        },
                        "serve": {
                            "$ref": "#/definitions/serve"
                        },
                        "test": {
                            "$ref": "#/definitions/test"
                        }
                    }
                }
            }
        },
        "build": {
            "type": "object",
            "properties": {
                "builder": {
                    "type": "string",
                    "enum": ["parcel", "tsc"]
                },
                "options": {
                    "type": "object",
                    "properties": {
                        "outputPath": {
                            "type": "string"
                        },
                        "main": {
                            "type": "string"
                        },
                        "tsConfig": {
                            "type": "string"
                        },
                        "targets": {
                            "type": "object",
                            "patternProperties": {
                                "^(?:@[a-zA-Z0-9._-]+/)?[a-zA-Z0-9._-]+$": {
                                    "$ref": "#/definitions/target"
                                }
                            }
                        }
                    }
                }
            }
        },
        "serve": {
            "type": "object"
        },
        "test": {
            "type": "object"
        },
        "target": {
            "type": "object",
            "properties": {
                "context": {
                    "type": "string",
                    "enum": [
                        "browser",
                        "web-worker",
                        "service-worker",
                        "worklet",
                        "node",
                        "electron-main",
                        "electron-renderer"
                    ]
                },
                "outputFormat": {
                    "type": "string",
                    "enum": ["esmodule", "commonjs", "global"]
                }
            }
        }
    }
}
